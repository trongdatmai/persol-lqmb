{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\src\\\\components\\\\Dashboard\\\\index.js\";\nimport React, { useEffect, useState } from 'react';\nimport firebase from \"./../../config\";\nimport W1 from './components/W1';\nimport W2 from './components/W2';\n\nvar Dashboard = function Dashboard(_ref) {\n  var changeStatusProgress = _ref.changeStatusProgress;\n  var ref = firebase.database();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      account = _useState2[0],\n      setAccount = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      historyMatchs = _useState4[0],\n      setHistoryMatchs = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fecthStatus = _useState6[0],\n      setFecthStatus = _useState6[1]; // useEffect(() => {\n\n\n  var a = _toConsumableArray(account).reduce(function (acc, cur) {\n    var objTmp = {\n      win: {},\n      lose: {}\n    };\n    if (!cur) return;\n    historyMatchs.map(function (h) {\n      if (h.blueTeam.includes(cur.ingame)) {\n        if (h.win === 'blueTeam') {\n          h.blueTeam.map(function (p) {\n            if (p !== cur.ingame) {\n              objTmp.win = !!objTmp.win[p] ? _objectSpread({}, objTmp.win, _defineProperty({}, p, objTmp.win[p] + 1)) : _objectSpread({}, objTmp.win, _defineProperty({}, p, 1));\n            }\n          });\n        } else {\n          h.blueTeam.map(function (p) {\n            if (p !== cur.ingame) {\n              objTmp.lose = !!objTmp.lose[p] ? _objectSpread({}, objTmp.lose, _defineProperty({}, p, objTmp.lose[p] + 1)) : _objectSpread({}, objTmp.lose, _defineProperty({}, p, 1));\n            }\n          });\n        }\n      }\n\n      if (h.redTeam.includes(cur.ingame)) {\n        if (h.win === 'redTeam') {\n          h.redTeam.map(function (p) {\n            if (p !== cur.ingame) {\n              objTmp.win = !!objTmp.win[p] ? _objectSpread({}, objTmp.win, _defineProperty({}, p, objTmp.win[p] + 1)) : _objectSpread({}, objTmp.win, _defineProperty({}, p, 1));\n            }\n          });\n        } else {\n          h.redTeam.map(function (p) {\n            if (p !== cur.ingame) {\n              objTmp.lose = !!objTmp.lose[p] ? _objectSpread({}, objTmp.lose, _defineProperty({}, p, objTmp.lose[p] + 1)) : _objectSpread({}, objTmp.lose, _defineProperty({}, p, 1));\n            }\n          });\n        }\n      }\n    });\n    console.log(objTmp);\n    return _objectSpread({}, acc, _defineProperty({}, cur.ingame, 0));\n  }, {});\n\n  console.log(account, historyMatchs, a); // }, [account, historyMatchs])\n\n  var initFunc =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var snapshotUsers, snapshotMatchs, _ref3, _ref4, users, matchs;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              snapshotUsers = ref.ref(\"users\").once(\"value\");\n              snapshotMatchs = ref.ref(\"historyMatch\").once(\"value\");\n              _context.next = 4;\n              return Promise.all([snapshotUsers, snapshotMatchs]);\n\n            case 4:\n              _ref3 = _context.sent;\n              _ref4 = _slicedToArray(_ref3, 2);\n              users = _ref4[0];\n              matchs = _ref4[1];\n              setAccount(Object.values(users.val()));\n              setHistoryMatchs(Object.values(matchs.val()));\n              setFecthStatus(true);\n              changeStatusProgress(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function initFunc() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    changeStatusProgress(true);\n    initFunc();\n  }, []);\n  if (!fecthStatus) return null;\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"animated fadeIn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(W1, {\n    account: account,\n    historyMatchs: historyMatchs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(W2, {\n    account: account,\n    historyMatchs: historyMatchs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/persol/persol-lqmb/src/components/Dashboard/index.js"],"names":["React","useEffect","useState","firebase","W1","W2","Dashboard","changeStatusProgress","ref","database","account","setAccount","historyMatchs","setHistoryMatchs","fecthStatus","setFecthStatus","a","reduce","acc","cur","objTmp","win","lose","map","h","blueTeam","includes","ingame","p","redTeam","console","log","initFunc","snapshotUsers","once","snapshotMatchs","Promise","all","users","matchs","Object","values","val"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport firebase from \"./../../config\";\r\nimport W1 from './components/W1';\r\nimport W2 from './components/W2';\r\n\r\nconst Dashboard = ({ changeStatusProgress }) => {\r\n    const ref = firebase.database();\r\n    const [account, setAccount] = useState([])\r\n    const [historyMatchs, setHistoryMatchs] = useState()\r\n    const [fecthStatus, setFecthStatus] = useState(false)\r\n\r\n    // useEffect(() => {\r\n    const a = [...account].reduce((acc, cur) => {\r\n        const objTmp = { win: {}, lose: {} };\r\n        if(!cur) return;\r\n        historyMatchs.map(h => {\r\n            if(h.blueTeam.includes(cur.ingame)) {\r\n                if(h.win === 'blueTeam') {\r\n                    h.blueTeam.map(p => {\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.win = !!objTmp.win[p] ? { ...objTmp.win, [p]: objTmp.win[p] + 1 } : { ...objTmp.win, [p]: 1 }\r\n                        }\r\n                    })\r\n                } else {\r\n                    h.blueTeam.map(p => {\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.lose = !!objTmp.lose[p] ? { ...objTmp.lose, [p]: objTmp.lose[p] + 1 } : { ...objTmp.lose, [p]: 1 }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            if(h.redTeam.includes(cur.ingame)) {\r\n                if(h.win === 'redTeam') {\r\n                    h.redTeam.map(p => {\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.win = !!objTmp.win[p] ? { ...objTmp.win, [p]: objTmp.win[p] + 1 } : { ...objTmp.win, [p]: 1 }\r\n                        }\r\n                    })\r\n                } else {\r\n                    h.redTeam.map(p => {\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.lose = !!objTmp.lose[p] ? { ...objTmp.lose, [p]: objTmp.lose[p] + 1 } : { ...objTmp.lose, [p]: 1 }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        })\r\n        console.log(objTmp)\r\n        return ({...acc, [cur.ingame]: 0})\r\n    }, {})\r\n\r\n    console.log(account, historyMatchs, a)\r\n    // }, [account, historyMatchs])\r\n\r\n    const initFunc = async () => {\r\n        const snapshotUsers = ref.ref(\"users\").once(\"value\")\r\n        const snapshotMatchs = ref.ref(\"historyMatch\").once(\"value\")\r\n        const [users, matchs] = await Promise.all([snapshotUsers, snapshotMatchs])\r\n        setAccount(Object.values(users.val()));\r\n        setHistoryMatchs(Object.values(matchs.val()));\r\n        setFecthStatus(true)\r\n        changeStatusProgress(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        changeStatusProgress(true)\r\n        initFunc();\r\n    }, [])\r\n\r\n    if (!fecthStatus) return null\r\n    return (<>\r\n        <div className=\"animated fadeIn\">\r\n            <W1 account={account} historyMatchs={historyMatchs} />\r\n            <W2 account={account} historyMatchs={historyMatchs} />\r\n        </div>\r\n    </>)\r\n}\r\n\r\nexport default Dashboard"]},"metadata":{},"sourceType":"module"}