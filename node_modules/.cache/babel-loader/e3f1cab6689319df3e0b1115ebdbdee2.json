{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\src\\\\views\\\\Pages\\\\Register\\\\Register.js\";\nimport React, { Component, useState } from \"react\";\nimport { Button, Card, CardBody, CardFooter, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nimport firebase from \"./../../../config\";\nimport { useHistory } from \"react-router-dom\";\nvar styleErr = {\n  border: \"1px solid #FF3300\"\n};\nvar styleExists = {\n  color: '#FF3300',\n  display: 'block'\n};\n\nfunction sleep(time) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, time);\n  });\n}\n\nvar Register = function Register() {\n  var history = useHistory();\n\n  var _useState = useState({\n    username: \"\",\n    password: \"\",\n    repPassword: \"\",\n    win: 0,\n    lose: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      account = _useState2[0],\n      setAccout = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      err = _useState4[0],\n      setErr = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      disabled = _useState6[0],\n      setDisabled = _useState6[1];\n\n  var handleRegister =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var e, ref;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e = false;\n\n              if (account.repPassword !== account.password || !account.password) {\n                setErr(function (prev) {\n                  return _objectSpread({}, prev, {\n                    password: true\n                  });\n                });\n                e = true;\n              }\n\n              if (!account.username && !account.username.trim()) {\n                setErr(function (prev) {\n                  return _objectSpread({}, prev, {\n                    username: true\n                  });\n                });\n                e = true;\n              }\n\n              if (!e) {\n                _context2.next = 5;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 5:\n              _context2.next = 7;\n              return setDisabled(true);\n\n            case 7:\n              ref = firebase.database();\n              ref.ref(\"users\").orderByChild(\"username\").equalTo(account.username).on(\"value\",\n              /*#__PURE__*/\n              function () {\n                var _ref2 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee(snapshot) {\n                  var key, childData;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          if (!(snapshot.val() === null)) {\n                            _context.next = 9;\n                            break;\n                          }\n\n                          account.avatar = 'https://image.flaticon.com/icons/svg/2439/2439789.svg';\n                          _context.next = 4;\n                          return setAccout(function (prev) {\n                            delete prev.repPassword;\n                            return prev;\n                          });\n\n                        case 4:\n                          ref.ref(\"users\").push(account);\n                          localStorage.setItem('account', JSON.stringify(account));\n                          history.push('/user/profile');\n                          _context.next = 13;\n                          break;\n\n                        case 9:\n                          setErr(function (prev) {\n                            return _objectSpread({}, prev, {\n                              exist: true\n                            });\n                          });\n                          setDisabled(false);\n                          key = snapshot.key;\n                          childData = snapshot.val();\n\n                        case 13:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }()); // firebase.database().ref('users').push(account);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleRegister() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: \"app flex-row align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"justify-content-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: \"9\",\n    lg: \"7\",\n    xl: \"6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"mx-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(CardBody, {\n    className: \"p-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Register\"), React.createElement(\"p\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Create your account\"), React.createElement(\"p\", {\n    style: err.exist ? styleExists : {\n      display: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Account already exists\"), React.createElement(InputGroup, {\n    className: \"mb-3\",\n    style: err.username ? styleErr : {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(InputGroupText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"icon-user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))), React.createElement(Input, {\n    type: \"text\",\n    placeholder: \"Username\",\n    autoComplete: \"username\",\n    value: account.username,\n    onChange: function onChange(_ref3) {\n      var value = _ref3.target.value;\n      setErr(function (prev) {\n        return _objectSpread({}, prev, {\n          exist: false\n        });\n      });\n      setAccout(function (prev) {\n        return _objectSpread({}, prev, {\n          username: value\n        });\n      });\n      setErr(function (prev) {\n        return _objectSpread({}, prev, {\n          username: false\n        });\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(InputGroup, {\n    className: \"mb-3\",\n    style: err.password ? styleErr : {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(InputGroupText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"icon-lock\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }))), React.createElement(Input, {\n    type: \"password\",\n    placeholder: \"Password\",\n    autoComplete: \"new-password\",\n    value: account.password,\n    onChange: function onChange(_ref4) {\n      var value = _ref4.target.value;\n      setAccout(function (prev) {\n        return _objectSpread({}, prev, {\n          password: value\n        });\n      });\n      setErr(function (prev) {\n        return _objectSpread({}, prev, {\n          password: false\n        });\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })), React.createElement(InputGroup, {\n    className: \"mb-4\",\n    style: err.password ? styleErr : {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(InputGroupText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"icon-lock\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }))), React.createElement(Input, {\n    type: \"password\",\n    placeholder: \"Repeat password\",\n    autoComplete: \"new-password\",\n    value: account.repPassword,\n    onChange: function onChange(_ref5) {\n      var value = _ref5.target.value;\n      setAccout(function (prev) {\n        return _objectSpread({}, prev, {\n          repPassword: value\n        });\n      });\n      setErr(function (prev) {\n        return _objectSpread({}, prev, {\n          password: false\n        });\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })), React.createElement(Button, {\n    color: \"success\",\n    block: true,\n    onClick: handleRegister,\n    disabled: disabled,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"Create Account\"))), React.createElement(CardFooter, {\n    className: \"p-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: \"12\",\n    sm: \"6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"btn-facebook mb-1\",\n    block: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"facebook\"))), React.createElement(Col, {\n    xs: \"12\",\n    sm: \"6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: \"btn-twitter mb-1\",\n    block: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"twitter\"))))))))));\n};\n\nexport default Register;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/persol/persol-lqmb/src/views/Pages/Register/Register.js"],"names":["React","Component","useState","Button","Card","CardBody","CardFooter","Col","Container","Form","Input","InputGroup","InputGroupAddon","InputGroupText","Row","firebase","useHistory","styleErr","border","styleExists","color","display","sleep","time","Promise","resolve","setTimeout","Register","history","username","password","repPassword","win","lose","account","setAccout","err","setErr","disabled","setDisabled","handleRegister","e","prev","trim","ref","database","orderByChild","equalTo","on","snapshot","val","avatar","push","localStorage","setItem","JSON","stringify","exist","key","childData","value","target"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Input,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  Row\r\n} from \"reactstrap\";\r\nimport firebase from \"./../../../config\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst styleErr = { border: \"1px solid #FF3300\" };\r\nconst styleExists = { color: '#FF3300', display: 'block' }\r\nfunction sleep(time) {\r\n  return new Promise(resolve => setTimeout(resolve, time));\r\n}\r\nconst Register = () => {\r\n  let history = useHistory();\r\n\r\n  const [account, setAccout] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    repPassword: \"\",\r\n    win: 0,\r\n    lose: 0\r\n  });\r\n  const [err, setErr] = useState({});\r\n  const [disabled, setDisabled] = useState(false);\r\n\r\n  const handleRegister = async () => {\r\n    let e = false;\r\n    if (account.repPassword !== account.password || !account.password) {\r\n      setErr(prev => ({ ...prev, password: true }));\r\n      e = true;\r\n    }\r\n    if (!account.username && !account.username.trim()) {\r\n      setErr(prev => ({ ...prev, username: true }));\r\n      e = true;\r\n    }\r\n    if (e) return;\r\n    await setDisabled(true);\r\n\r\n    const ref = firebase.database();\r\n\r\n    ref\r\n      .ref(\"users\")\r\n      .orderByChild(\"username\")\r\n      .equalTo(account.username)\r\n      .on(\"value\", async snapshot => {\r\n        if (snapshot.val() === null) {\r\n          account.avatar = 'https://image.flaticon.com/icons/svg/2439/2439789.svg';\r\n          await setAccout(prev => { delete prev.repPassword; return prev });\r\n          ref.ref(\"users\").push(account);\r\n          localStorage.setItem('account', JSON.stringify(account));\r\n          history.push('/user/profile');\r\n        } else {\r\n          setErr(prev => ({ ...prev, exist: true }));\r\n          setDisabled(false)\r\n          var key = snapshot.key;\r\n          var childData = snapshot.val();\r\n        }\r\n      });\r\n    // firebase.database().ref('users').push(account);\r\n  };\r\n  return (\r\n    <div className=\"app flex-row align-items-center\">\r\n      <Container>\r\n        <Row className=\"justify-content-center\">\r\n          <Col md=\"9\" lg=\"7\" xl=\"6\">\r\n            <Card className=\"mx-4\">\r\n              <CardBody className=\"p-4\">\r\n                <Form>\r\n                  <h1>Register</h1>\r\n                  <p className=\"text-muted\">Create your account</p>\r\n                  <p style={err.exist ? styleExists : {display: 'none'} } >Account already exists</p>\r\n                  <InputGroup\r\n                    className=\"mb-3\"\r\n                    style={err.username ? styleErr : {}}\r\n                  >\r\n                    <InputGroupAddon addonType=\"prepend\">\r\n                      <InputGroupText>\r\n                        <i className=\"icon-user\"></i>\r\n                      </InputGroupText>\r\n                    </InputGroupAddon>\r\n                    <Input\r\n                      type=\"text\"\r\n                      placeholder=\"Username\"\r\n                      autoComplete=\"username\"\r\n                      value={account.username}\r\n                      onChange={({ target: { value } }) => {\r\n                        setErr(prev => ({ ...prev, exist: false }));\r\n                        setAccout(prev => ({ ...prev, username: value }));\r\n                        setErr(prev => ({ ...prev, username: false }));\r\n                      }}\r\n                    />\r\n                  </InputGroup>\r\n                  <InputGroup\r\n                    className=\"mb-3\"\r\n                    style={err.password ? styleErr : {}}\r\n                  >\r\n                    <InputGroupAddon addonType=\"prepend\">\r\n                      <InputGroupText>\r\n                        <i className=\"icon-lock\"></i>\r\n                      </InputGroupText>\r\n                    </InputGroupAddon>\r\n                    <Input\r\n                      type=\"password\"\r\n                      placeholder=\"Password\"\r\n                      autoComplete=\"new-password\"\r\n                      value={account.password}\r\n                      onChange={({ target: { value } }) => {\r\n                        setAccout(prev => ({ ...prev, password: value }));\r\n                        setErr(prev => ({ ...prev, password: false }));\r\n                      }}\r\n                    />\r\n                  </InputGroup>\r\n                  <InputGroup\r\n                    className=\"mb-4\"\r\n                    style={err.password ? styleErr : {}}\r\n                  >\r\n                    <InputGroupAddon addonType=\"prepend\">\r\n                      <InputGroupText>\r\n                        <i className=\"icon-lock\"></i>\r\n                      </InputGroupText>\r\n                    </InputGroupAddon>\r\n                    <Input\r\n                      type=\"password\"\r\n                      placeholder=\"Repeat password\"\r\n                      autoComplete=\"new-password\"\r\n                      value={account.repPassword}\r\n                      onChange={({ target: { value } }) => {\r\n                        setAccout(prev => ({ ...prev, repPassword: value }));\r\n                        setErr(prev => ({ ...prev, password: false }));\r\n                      }}\r\n                    />\r\n                  </InputGroup>\r\n                  <Button\r\n                    color=\"success\"\r\n                    block\r\n                    onClick={handleRegister}\r\n                    disabled={disabled}\r\n                  >\r\n                    Create Account\r\n                  </Button>\r\n                </Form>\r\n              </CardBody>\r\n              <CardFooter className=\"p-4\">\r\n                <Row>\r\n                  <Col xs=\"12\" sm=\"6\">\r\n                    <Button className=\"btn-facebook mb-1\" block>\r\n                      <span>facebook</span>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col xs=\"12\" sm=\"6\">\r\n                    <Button className=\"btn-twitter mb-1\" block>\r\n                      <span>twitter</span>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </CardFooter>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}