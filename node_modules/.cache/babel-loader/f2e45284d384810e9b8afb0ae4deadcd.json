{"ast":null,"code":"\"use strict\";\n/*\n * Copyright 2019 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar resolver_dns = require(\"./resolver-dns\");\n\nvar resolver_uds = require(\"./resolver-uds\");\n\nvar registeredResolvers = {};\nvar defaultResolver = null;\n/**\n * Register a resolver class to handle target names prefixed with the `prefix`\n * string. This prefix should correspond to a URI scheme name listed in the\n * [gRPC Name Resolution document](https://github.com/grpc/grpc/blob/master/doc/naming.md)\n * @param prefix\n * @param resolverClass\n */\n\nfunction registerResolver(prefix, resolverClass) {\n  registeredResolvers[prefix] = resolverClass;\n}\n\nexports.registerResolver = registerResolver;\n/**\n * Register a default resolver to handle target names that do not start with\n * any registered prefix.\n * @param resolverClass\n */\n\nfunction registerDefaultResolver(resolverClass) {\n  defaultResolver = resolverClass;\n}\n\nexports.registerDefaultResolver = registerDefaultResolver;\n/**\n * Create a name resolver for the specified target, if possible. Throws an\n * error if no such name resolver can be created.\n * @param target\n * @param listener\n */\n\nfunction createResolver(target, listener) {\n  for (var _i = 0, _Object$keys = Object.keys(registeredResolvers); _i < _Object$keys.length; _i++) {\n    var prefix = _Object$keys[_i];\n\n    if (target.startsWith(prefix)) {\n      return new registeredResolvers[prefix](target, listener);\n    }\n  }\n\n  if (defaultResolver !== null) {\n    return new defaultResolver(target, listener);\n  }\n\n  throw new Error(\"No resolver could be created for target \".concat(target));\n}\n\nexports.createResolver = createResolver;\n/**\n * Get the default authority for the specified target, if possible. Throws an\n * error if no registered name resolver can parse that target string.\n * @param target\n */\n\nfunction getDefaultAuthority(target) {\n  for (var _i2 = 0, _Object$keys2 = Object.keys(registeredResolvers); _i2 < _Object$keys2.length; _i2++) {\n    var prefix = _Object$keys2[_i2];\n\n    if (target.startsWith(prefix)) {\n      return registeredResolvers[prefix].getDefaultAuthority(target);\n    }\n  }\n\n  if (defaultResolver !== null) {\n    return defaultResolver.getDefaultAuthority(target);\n  }\n\n  throw new Error(\"Invalid target \".concat(target));\n}\n\nexports.getDefaultAuthority = getDefaultAuthority;\n\nfunction registerAll() {\n  resolver_dns.setup();\n  resolver_uds.setup();\n}\n\nexports.registerAll = registerAll;","map":null,"metadata":{},"sourceType":"script"}