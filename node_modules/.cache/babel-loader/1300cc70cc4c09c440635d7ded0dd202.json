{"ast":null,"code":"import _objectSpread from \"/Users/maidat/Desktop/team-lq/persol-lqmb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/maidat/Desktop/team-lq/persol-lqmb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/maidat/Desktop/team-lq/persol-lqmb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/maidat/Desktop/team-lq/persol-lqmb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/maidat/Desktop/team-lq/persol-lqmb/src/views/Pages/Login/Login.js\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Button, Card, CardBody, CardGroup, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nimport firebase from './../../../config';\nimport { useHistory } from 'react-router-dom';\nvar styleExists = {\n  color: '#FF3300',\n  display: 'block'\n};\n\nvar Login = function Login() {\n  var history = useHistory();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      account = _useState2[0],\n      setAccount = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      err = _useState4[0],\n      setErr = _useState4[1];\n\n  var handleLogin = function handleLogin() {\n    var ref = firebase.database();\n    ref.ref(\"users\").orderByChild(\"username\").equalTo(account.username).on(\"value\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(snapshot) {\n        var _Object$values, _Object$values2, acc;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (snapshot.val() === null) {\n                  setErr(true);\n                } else {\n                  _Object$values = Object.values(snapshot.val()), _Object$values2 = _slicedToArray(_Object$values, 1), acc = _Object$values2[0];\n\n                  if (acc.password === account.password) {\n                    setErr(false);\n                    localStorage.setItem('account', JSON.stringify(account));\n                    history.push('/');\n                  } else {\n                    setErr(true);\n                  }\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  };\n\n  return React.createElement(\"div\", {\n    className: \"app flex-row align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(Row, {\n    className: \"justify-content-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: \"8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(CardGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"p-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(CardBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"p\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Sign In to your account\"), React.createElement(\"p\", {\n    style: err ? styleExists : {\n      display: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Login fail!\"), React.createElement(InputGroup, {\n    className: \"mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(InputGroupText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"icon-user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }))), React.createElement(Input, {\n    type: \"text\",\n    placeholder: \"Username\",\n    autoComplete: \"username\",\n    value: setAccount.username,\n    onChange: function onChange(_ref2) {\n      var value = _ref2.target.value;\n      return setAccount(function (prev) {\n        return _objectSpread({}, prev, {\n          username: value\n        });\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })), React.createElement(InputGroup, {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(InputGroupText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"icon-lock\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }))), React.createElement(Input, {\n    type: \"password\",\n    placeholder: \"Password\",\n    autoComplete: \"current-password\",\n    value: setAccount.password,\n    onChange: function onChange(_ref3) {\n      var value = _ref3.target.value;\n      return setAccount(function (prev) {\n        return _objectSpread({}, prev, {\n          password: value\n        });\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: \"6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"primary\",\n    className: \"px-4\",\n    onClick: handleLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Login\")), React.createElement(Col, {\n    xs: \"6\",\n    className: \"text-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"link\",\n    className: \"px-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Forgot password?\")))))), React.createElement(Card, {\n    className: \"text-white bg-primary py-5 d-md-down-none\",\n    style: {\n      width: \"44%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(CardBody, {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Sign up\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Sign up for an account if you don't already have one\"), React.createElement(Link, {\n    to: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"primary\",\n    className: \"mt-3\",\n    active: true,\n    tabIndex: -1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Register Now!\"))))))))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/maidat/Desktop/team-lq/persol-lqmb/src/views/Pages/Login/Login.js"],"names":["React","useState","Link","Button","Card","CardBody","CardGroup","Col","Container","Form","Input","InputGroup","InputGroupAddon","InputGroupText","Row","firebase","useHistory","styleExists","color","display","Login","history","account","setAccount","err","setErr","handleLogin","ref","database","orderByChild","equalTo","username","on","snapshot","val","Object","values","acc","password","localStorage","setItem","JSON","stringify","push","value","target","prev","width"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardGroup,\n  Col,\n  Container,\n  Form,\n  Input,\n  InputGroup,\n  InputGroupAddon,\n  InputGroupText,\n  Row\n} from \"reactstrap\";\nimport firebase from './../../../config';\nimport { useHistory } from 'react-router-dom';\nconst styleExists = { color: '#FF3300', display: 'block' }\n\nconst Login = () => {\n  const history = useHistory();\n  const [account, setAccount] = useState({});\n  const [err, setErr] = useState(false);\n  const handleLogin = () => {\n    const ref = firebase.database();\n    ref\n      .ref(\"users\")\n      .orderByChild(\"username\")\n      .equalTo(account.username)\n      .on(\"value\", async snapshot => {\n        if (snapshot.val() === null) {\n          setErr(true)\n        } else {\n          const [acc] = Object.values(snapshot.val())\n          if(acc.password === account.password) {\n            setErr(false)\n            localStorage.setItem('account', JSON.stringify(account));\n            history.push('/');\n          } else {\n            setErr(true)\n          }\n        }\n      });\n  }\n\n  return (\n    <div className=\"app flex-row align-items-center\">\n      <Container>\n        <Row className=\"justify-content-center\">\n          <Col md=\"8\">\n            <CardGroup>\n              <Card className=\"p-4\">\n                <CardBody>\n                  <Form>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account</p>\n                    <p style={err ? styleExists : {display: 'none'} } >Login fail!</p>\n                    <InputGroup className=\"mb-3\">\n                      <InputGroupAddon addonType=\"prepend\">\n                        <InputGroupText>\n                          <i className=\"icon-user\"></i>\n                        </InputGroupText>\n                      </InputGroupAddon>\n                      <Input\n                        type=\"text\"\n                        placeholder=\"Username\"\n                        autoComplete=\"username\"\n                        value={setAccount.username}\n                        onChange={({ target: {value}}) => setAccount(prev => ({...prev, username: value}))}\n                      />\n                    </InputGroup>\n                    <InputGroup className=\"mb-4\">\n                      <InputGroupAddon addonType=\"prepend\">\n                        <InputGroupText>\n                          <i className=\"icon-lock\"></i>\n                        </InputGroupText>\n                      </InputGroupAddon>\n                      <Input\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        autoComplete=\"current-password\"\n                        value={setAccount.password}\n                        onChange={({ target: {value}}) => setAccount(prev => ({...prev, password: value}))}\n                      />\n                    </InputGroup>\n                    <Row>\n                      <Col xs=\"6\">\n                        <Button color=\"primary\" className=\"px-4\" onClick={handleLogin}>\n                          Login\n                        </Button>\n                      </Col>\n                      <Col xs=\"6\" className=\"text-right\">\n                        <Button color=\"link\" className=\"px-0\">\n                          Forgot password?\n                        </Button>\n                      </Col>\n                    </Row>\n                  </Form>\n                </CardBody>\n              </Card>\n              <Card\n                className=\"text-white bg-primary py-5 d-md-down-none\"\n                style={{ width: \"44%\" }}\n              >\n                <CardBody className=\"text-center\">\n                  <div>\n                    <h2>Sign up</h2>\n                    <p>Sign up for an account if you don't already have one</p>\n                    <Link to=\"/register\">\n                      <Button\n                        color=\"primary\"\n                        className=\"mt-3\"\n                        active\n                        tabIndex={-1}\n                      >\n                        Register Now!\n                      </Button>\n                    </Link>\n                  </div>\n                </CardBody>\n              </Card>\n            </CardGroup>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}