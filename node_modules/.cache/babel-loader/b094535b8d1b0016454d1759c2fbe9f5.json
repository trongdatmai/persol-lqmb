{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import firebase from\"./../../config\";import{Card,CardBody,CardHeader,Col,Row,Table,CardImg,Badge,Button}from\"reactstrap\";import{AppSwitch}from\"@coreui/react\";import ChartTeams from\"./ChartTeams\";import TableTeams from\"./TableTeams\";import OldMatch from\"./OldMatch\";import moment from\"moment\";var scrollToRef=function scrollToRef(ref){return ref.current.scrollIntoView({behavior:\"smooth\",block:\"start\"});};var Random=function Random(_ref){var changeStatusProgress=_ref.changeStatusProgress;var myRef=useRef(null);var ref=firebase.database();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),teams=_useState4[0],setTeams=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),oldMatch=_useState6[0],setOldMatch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),randomPlayerNotInclude=_useState8[0],setRandomPlayerNotInclude=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),lastRandomNotPlay=_useState10[0],setLastRandomNotPlay=_useState10[1];var handleRandomPlayer=function handleRandomPlayer(){setUsers(function(prev){return prev.map(function(i){return _objectSpread({},i,{checked:false});});});var arrayUsers=_toConsumableArray(lastRandomNotPlay.map(function(i){return i.ingame;}));var tempUsers=_toConsumableArray(users).filter(function(i){return!arrayUsers.includes(i.ingame);});var length=arrayUsers.length;for(var i=0;i<10-length;i++){var index=~~(Math.random()*tempUsers.length);arrayUsers=[].concat(_toConsumableArray(arrayUsers),[tempUsers[index]&&tempUsers[index].ingame]);tempUsers.splice(index,1);}setUsers(function(prev){return prev.map(function(i){return arrayUsers.includes(i.ingame)?_objectSpread({},i,{checked:true}):i;});});setTeams({});setRandomPlayerNotInclude(tempUsers);};useEffect(function(){changeStatusProgress(true);ref.ref(\"users\").orderByValue().on(\"value\",function(snap){changeStatusProgress(false);setUsers(Object.values(snap.val()).map(function(user){return _objectSpread({},user,{checked:false});}));});ref.ref(\"historyRandom\").orderByValue().limitToLast(1).on(\"value\",function(snap){changeStatusProgress(false);if(snap.val()!==null&&!Object.values(snap.val())[0].complete){setOldMatch(Object.values(snap.val())[0]);}});ref.ref(\"historyRandomNotPlay\").orderByValue().limitToLast(1).on(\"value\",function(snap){if(snap.val()){setLastRandomNotPlay(Object.values(snap.val())[0]);}});},[]);var statisticPlayer=function statisticPlayer(player){return users.find(function(user){return user.ingame===player;});};useEffect(function(){scrollToRef(myRef);},[teams]);var lastInfoTeam=function lastInfoTeam(){var _ref2;var t1=teams[0]&&teams[0].map(function(i){var player=i.split(\" - \")[0];var addStatistic=i+\" - \"+statisticPlayer(player).win+\" - \"+statisticPlayer(player).lose+\" - \"+statisticPlayer(player).avatar;return addStatistic;});var t2=teams[1]&&teams[1].map(function(i){var player=i.split(\" - \")[0];var addStatistic=i+\" - \"+statisticPlayer(player).win+\" - \"+statisticPlayer(player).lose+\" -  \"+statisticPlayer(player).avatar;return addStatistic;});return _ref2={},_defineProperty(_ref2,0,t1),_defineProperty(_ref2,1,t2),_ref2;};var handleSplitTeam=function handleSplitTeam(){var teams=users.filter(function(i){return i.checked;});var tmpTeams=[];for(var i=0;i<10;i++){var randomFollowLength=~~(Math.random()*teams.length);tmpTeams=[].concat(_toConsumableArray(tmpTeams),[teams[randomFollowLength]]);teams.splice(randomFollowLength,1);}teams=tmpTeams;var names=teams.map(function(i){return i.ingame;});var details=teams.reduce(function(acc,cur){return _objectSpread({},acc,_defineProperty({},cur.ingame,cur.role));},{});var random=function random(){return~~(Math.random()*5);};var isFull=function isFull(team){return team.length===5;};var renderLane=function renderLane(player,team){try{var rLane=details[player][random()];if(!rLane||team.some(function(i){return i.includes(rLane);})){return renderLane(player,team);}return\"\".concat(player,\" - \").concat(rLane);}catch(err){return handleSplitTeam();}};var splitTeam=names.reduce(function(acc,cur){if(isFull(acc[0])||isFull(acc[1])){isFull(acc[0])?acc[1].push(renderLane(cur,acc[1])):acc[0].push(renderLane(cur,acc[1]));}else{var r=random()%2;acc[r].push(renderLane(cur,acc[r]));}return acc;},{\"0\":[],\"1\":[]});if(splitTeam[0].filter(Boolean).length===5&&splitTeam[1].filter(Boolean).length===5){var point1=splitTeam[0].reduce(function(acc,cur){var name=cur.split(' - ')[0];var u=users.find(function(u){return u.ingame===name;});acc+=u.coefficient*~~(u.win/(u.win+u.lose)*100);return acc;},0);var point2=splitTeam[1].reduce(function(acc,cur){var name=cur.split(' - ')[0];var u=users.find(function(u){return u.ingame===name;});acc+=u.coefficient*~~(u.win/(u.win+u.lose)*100);return acc;},0);if(Math.abs(point1-point2)<40){setTeams(splitTeam);}else{return handleSplitTeam();}}};var renderRole=function renderRole(r){switch(r){case\"top\":return React.createElement(Badge,{style:{background:\"#0099FF\",marginRight:10,color:\"white\"}},r);case\"jungle\":return React.createElement(Badge,{style:{background:\"#3366CC\",marginRight:10,color:\"white\"}},r);case\"mid\":return React.createElement(Badge,{style:{background:\"#FF9900\",marginRight:10,color:\"white\"}},r);case\"ad\":return React.createElement(Badge,{style:{background:\"#f25e5e\",marginRight:10,color:\"white\"}},r);case\"support\":return React.createElement(Badge,{style:{background:\"#f2a766\",marginRight:10,color:\"white\"}},r);default:return r;}};var renderWinRate=function renderWinRate(r){if(r<=25){return React.createElement(Badge,{style:{background:\"#f25e5e\",marginRight:10,color:\"white\"}},r,React.createElement(\"small\",null,\"%\"));}else if(r<=50){return React.createElement(Badge,{color:\"warning\"},r,React.createElement(\"small\",null,\"%\"));}else if(r<=75){return React.createElement(Badge,{color:\"primary\"},r,React.createElement(\"small\",null,\"%\"));}else if(r<=100){return React.createElement(Badge,{color:\"success\"},r,React.createElement(\"small\",null,\"%\"));}};var renderUser=function renderUser(){return users.map(function(user,index){return React.createElement(\"tr\",{key:user.username},React.createElement(\"td\",null,React.createElement(Badge,{style:{background:\"#660099\",color:\"white\"}},index+1)),React.createElement(\"td\",null,user.avatar&&React.createElement(CardImg,{style:{width:\"30px\"},src:user.avatar,alt:\"avatar\"})),React.createElement(\"td\",null,React.createElement(Badge,{style:{background:\"#660099\",color:\"white\"}},user.ingame)),React.createElement(\"td\",null,user.role&&user.role.map(function(r){return React.createElement(\"span\",{key:user.username+r},renderRole(r));})),React.createElement(\"td\",null,React.createElement(Badge,{color:\"success\"},user.win)),React.createElement(\"td\",null,React.createElement(Badge,{color:\"danger\"},user.lose)),React.createElement(\"td\",null,renderWinRate(~~(user.win/(user.win+user.lose)*100||0))),React.createElement(\"td\",null,React.createElement(AppSwitch,{className:\"mx-1\",color:\"success\",checked:user.checked,disabled:handleTotalSelected()===10&&!user.checked||!user.role||!user.role.length,onChange:function onChange(_ref3){var checked=_ref3.target.checked;setUsers(function(prev){return prev.map(function(p){if(p.username===user.username){p.checked=checked;}return p;});});}})));});};var handleTotalSelected=function handleTotalSelected(){return users.filter(function(i){return i.checked;}).length;};var handleSaveTeamRandom=function handleSaveTeamRandom(){changeStatusProgress(true);var statistic={blueTeam:teams[0],redTeam:teams[1],dateMatch:moment(new Date()).format(\"YYYY-MM-DD\"),complete:false,authorCreate:JSON.parse(localStorage.getItem(\"account\")).username,authorUpdate:\"\"};ref.ref(\"historyRandom\").push(statistic,function(snap){changeStatusProgress(false);});ref.ref(\"historyRandomNotPlay\").push(randomPlayerNotInclude);setOldMatch(statistic);};if(oldMatch.complete===false)return React.createElement(OldMatch,{oldMatch:oldMatch,changeStatusProgress:changeStatusProgress});return React.createElement(Row,null,React.createElement(Col,null,React.createElement(Card,null,React.createElement(CardHeader,null,React.createElement(\"i\",{className:\"fa fa-align-justify\"}),\" Users table\"),React.createElement(CardBody,null,React.createElement(\"h4\",null,\"Player selected\",\" \",React.createElement(Badge,{color:handleTotalSelected()===10?\"success\":\"secondary\"},handleTotalSelected())),handleTotalSelected()!==10&&React.createElement(\"small\",null,\"Choose 10 players from the board\")||React.createElement(\"small\",null,\"Picked enough\"),React.createElement(Table,{hover:true,bordered:true,striped:true,responsive:true,size:\"sm\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"#\"),React.createElement(\"th\",null,\"Avatar\"),React.createElement(\"th\",null,\"Player\"),React.createElement(\"th\",null,\"Role\"),React.createElement(\"th\",null,\"Win\"),React.createElement(\"th\",null,\"Lost\"),React.createElement(\"th\",null,\"Win rate \",React.createElement(\"small\",null,\"(%)\")),React.createElement(\"th\",null,\"Status\"))),React.createElement(\"tbody\",null,renderUser())),React.createElement(Row,null,React.createElement(Col,{col:\"6\",sm:\"4\",md:\"3\",xl:\"2\",className:\"mb-3 mb-xl-0\"},React.createElement(Button,{block:true,color:\"success\",onClick:handleRandomPlayer,fullWidth:true},\"Random players\")),React.createElement(Col,{col:\"6\",sm:\"4\",md:\"3\",xl:\"2\",className:\"mb-3 mb-xl-0\"},React.createElement(Button,{block:true,color:\"success\",disabled:handleTotalSelected()!==10,onClick:handleSplitTeam,fullWidth:true},\"Random team\"))),React.createElement(\"div\",{ref:myRef},teams&&JSON.stringify(teams)!==\"{}\"&&React.createElement(React.Fragment,null,React.createElement(TableTeams,{teams:lastInfoTeam()}),React.createElement(ChartTeams,{teams:lastInfoTeam()}),React.createElement(Row,null,React.createElement(Col,{col:\"6\",sm:\"4\",md:\"3\",xl:\"2\",className:\"mb-3 mb-xl-0\"},React.createElement(Button,{block:true,color:\"success\",onClick:handleSaveTeamRandom},\"Save Team\")))))))));};export default Random;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/persol/persol-lqmb/src/components/Random/index.js"],"names":["React","useState","useEffect","useRef","firebase","Card","CardBody","CardHeader","Col","Row","Table","CardImg","Badge","Button","AppSwitch","ChartTeams","TableTeams","OldMatch","moment","scrollToRef","ref","current","scrollIntoView","behavior","block","Random","changeStatusProgress","myRef","database","users","setUsers","teams","setTeams","oldMatch","setOldMatch","randomPlayerNotInclude","setRandomPlayerNotInclude","lastRandomNotPlay","setLastRandomNotPlay","handleRandomPlayer","prev","map","i","checked","arrayUsers","ingame","tempUsers","filter","includes","length","index","Math","random","splice","orderByValue","on","snap","Object","values","val","user","limitToLast","complete","statisticPlayer","player","find","lastInfoTeam","t1","split","addStatistic","win","lose","avatar","t2","handleSplitTeam","tmpTeams","randomFollowLength","names","details","reduce","acc","cur","role","isFull","team","renderLane","rLane","some","err","splitTeam","push","r","Boolean","point1","name","u","coefficient","point2","abs","renderRole","background","marginRight","color","renderWinRate","renderUser","username","width","handleTotalSelected","target","p","handleSaveTeamRandom","statistic","blueTeam","redTeam","dateMatch","Date","format","authorCreate","JSON","parse","localStorage","getItem","authorUpdate","stringify"],"mappings":"yhBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,OACEC,IADF,CAEEC,QAFF,CAGEC,UAHF,CAIEC,GAJF,CAKEC,GALF,CAMEC,KANF,CAOEC,OAPF,CAQEC,KARF,CASEC,MATF,KAUO,YAVP,CAWA,OAASC,SAAT,KAA0B,eAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,GAAG,QACrBA,CAAAA,GAAG,CAACC,OAAJ,CAAYC,cAAZ,CAA2B,CAAEC,QAAQ,CAAE,QAAZ,CAAsBC,KAAK,CAAE,OAA7B,CAA3B,CADqB,EAAvB,CAGA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAA8B,IAA3BC,CAAAA,oBAA2B,MAA3BA,oBAA2B,CAC3C,GAAMC,CAAAA,KAAK,CAAGxB,MAAM,CAAC,IAAD,CAApB,CACA,GAAMiB,CAAAA,GAAG,CAAGhB,QAAQ,CAACwB,QAAT,EAAZ,CAF2C,cAGjB3B,QAAQ,CAAC,EAAD,CAHS,wCAGpC4B,KAHoC,eAG7BC,QAH6B,8BAIjB7B,QAAQ,CAAC,EAAD,CAJS,yCAIpC8B,KAJoC,eAI7BC,QAJ6B,8BAKX/B,QAAQ,CAAC,EAAD,CALG,yCAKpCgC,QALoC,eAK1BC,WAL0B,8BAMiBjC,QAAQ,CAAC,EAAD,CANzB,yCAMpCkC,sBANoC,eAMZC,yBANY,8BAOOnC,QAAQ,CAAC,EAAD,CAPf,0CAOpCoC,iBAPoC,gBAOjBC,oBAPiB,gBAS3C,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/BT,QAAQ,CAAC,SAAAU,IAAI,QAAIA,CAAAA,IAAI,CAACC,GAAL,CAAS,SAAAC,CAAC,0BAAUA,CAAV,EAAaC,OAAO,CAAE,KAAtB,IAAV,CAAJ,EAAL,CAAR,CACA,GAAIC,CAAAA,UAAU,oBAAOP,iBAAiB,CAACI,GAAlB,CAAsB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACG,MAAN,EAAvB,CAAP,CAAd,CACA,GAAIC,CAAAA,SAAS,CAAG,mBAAIjB,KAAJ,EAAWkB,MAAX,CAAkB,SAAAL,CAAC,QAAI,CAACE,UAAU,CAACI,QAAX,CAAoBN,CAAC,CAACG,MAAtB,CAAL,EAAnB,CAAhB,CACA,GAAII,CAAAA,MAAM,CAAGL,UAAU,CAACK,MAAxB,CACA,IAAK,GAAIP,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,GAAKO,MAAzB,CAAiCP,CAAC,EAAlC,CAAsC,CACpC,GAAIQ,CAAAA,KAAK,CAAG,CAAC,EAAEC,IAAI,CAACC,MAAL,GAAgBN,SAAS,CAACG,MAA5B,CAAb,CACAL,UAAU,8BAAOA,UAAP,GAAmBE,SAAS,CAACI,KAAD,CAAT,EAAoBJ,SAAS,CAACI,KAAD,CAAT,CAAiBL,MAAxD,EAAV,CACAC,SAAS,CAACO,MAAV,CAAiBH,KAAjB,CAAwB,CAAxB,EACD,CAEDpB,QAAQ,CAAC,SAAAU,IAAI,QACXA,CAAAA,IAAI,CAACC,GAAL,CAAS,SAAAC,CAAC,QACRE,CAAAA,UAAU,CAACI,QAAX,CAAoBN,CAAC,CAACG,MAAtB,mBAAqCH,CAArC,EAAwCC,OAAO,CAAE,IAAjD,GAA0DD,CADlD,EAAV,CADW,EAAL,CAAR,CAKAV,QAAQ,CAAC,EAAD,CAAR,CACAI,yBAAyB,CAACU,SAAD,CAAzB,CACD,CAlBD,CAoBA5C,SAAS,CAAC,UAAM,CACdwB,oBAAoB,CAAC,IAAD,CAApB,CACAN,GAAG,CACAA,GADH,CACO,OADP,EAEGkC,YAFH,GAGGC,EAHH,CAGM,OAHN,CAGe,SAAAC,IAAI,CAAI,CACnB9B,oBAAoB,CAAC,KAAD,CAApB,CACAI,QAAQ,CACN2B,MAAM,CAACC,MAAP,CAAcF,IAAI,CAACG,GAAL,EAAd,EAA0BlB,GAA1B,CAA8B,SAAAmB,IAAI,0BAAUA,IAAV,EAAgBjB,OAAO,CAAE,KAAzB,IAAlC,CADM,CAAR,CAGD,CARH,EAUAvB,GAAG,CACAA,GADH,CACO,eADP,EAEGkC,YAFH,GAGGO,WAHH,CAGe,CAHf,EAIGN,EAJH,CAIM,OAJN,CAIe,SAAAC,IAAI,CAAI,CACnB9B,oBAAoB,CAAC,KAAD,CAApB,CACA,GAAI8B,IAAI,CAACG,GAAL,KAAe,IAAf,EAAuB,CAACF,MAAM,CAACC,MAAP,CAAcF,IAAI,CAACG,GAAL,EAAd,EAA0B,CAA1B,EAA6BG,QAAzD,CAAmE,CACjE5B,WAAW,CAACuB,MAAM,CAACC,MAAP,CAAcF,IAAI,CAACG,GAAL,EAAd,EAA0B,CAA1B,CAAD,CAAX,CACD,CACF,CATH,EAWAvC,GAAG,CACAA,GADH,CACO,sBADP,EAEGkC,YAFH,GAGGO,WAHH,CAGe,CAHf,EAIGN,EAJH,CAIM,OAJN,CAIe,SAAAC,IAAI,CAAI,CACnB,GAAIA,IAAI,CAACG,GAAL,EAAJ,CAAgB,CACdrB,oBAAoB,CAACmB,MAAM,CAACC,MAAP,CAAcF,IAAI,CAACG,GAAL,EAAd,EAA0B,CAA1B,CAAD,CAApB,CACD,CACF,CARH,EASD,CAhCQ,CAgCN,EAhCM,CAAT,CAkCA,GAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,MAAM,QAAInC,CAAAA,KAAK,CAACoC,IAAN,CAAW,SAAAL,IAAI,QAAIA,CAAAA,IAAI,CAACf,MAAL,GAAgBmB,MAApB,EAAf,CAAJ,EAA9B,CAEA9D,SAAS,CAAC,UAAM,CACdiB,WAAW,CAACQ,KAAD,CAAX,CACD,CAFQ,CAEN,CAACI,KAAD,CAFM,CAAT,CAIA,GAAMmC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,WACzB,GAAMC,CAAAA,EAAE,CACNpC,KAAK,CAAC,CAAD,CAAL,EACAA,KAAK,CAAC,CAAD,CAAL,CAASU,GAAT,CAAa,SAAAC,CAAC,CAAI,CAChB,GAAMsB,CAAAA,MAAM,CAAGtB,CAAC,CAAC0B,KAAF,CAAQ,KAAR,EAAe,CAAf,CAAf,CACA,GAAMC,CAAAA,YAAY,CAChB3B,CAAC,CACD,KADA,CAEAqB,eAAe,CAACC,MAAD,CAAf,CAAwBM,GAFxB,CAGA,KAHA,CAIAP,eAAe,CAACC,MAAD,CAAf,CAAwBO,IAJxB,CAKA,KALA,CAMAR,eAAe,CAACC,MAAD,CAAf,CAAwBQ,MAP1B,CAQA,MAAOH,CAAAA,YAAP,CACD,CAXD,CAFF,CAcA,GAAMI,CAAAA,EAAE,CACN1C,KAAK,CAAC,CAAD,CAAL,EACAA,KAAK,CAAC,CAAD,CAAL,CAASU,GAAT,CAAa,SAAAC,CAAC,CAAI,CAChB,GAAMsB,CAAAA,MAAM,CAAGtB,CAAC,CAAC0B,KAAF,CAAQ,KAAR,EAAe,CAAf,CAAf,CACA,GAAMC,CAAAA,YAAY,CAChB3B,CAAC,CACD,KADA,CAEAqB,eAAe,CAACC,MAAD,CAAf,CAAwBM,GAFxB,CAGA,KAHA,CAIAP,eAAe,CAACC,MAAD,CAAf,CAAwBO,IAJxB,CAKA,MALA,CAMAR,eAAe,CAACC,MAAD,CAAf,CAAwBQ,MAP1B,CAQA,MAAOH,CAAAA,YAAP,CACD,CAXD,CAFF,CAcA,sCAAU,CAAV,CAAcF,EAAd,wBAAmB,CAAnB,CAAuBM,EAAvB,QACD,CA9BD,CAgCA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAI3C,CAAAA,KAAK,CAAGF,KAAK,CAACkB,MAAN,CAAa,SAAAL,CAAC,QAAIA,CAAAA,CAAC,CAACC,OAAN,EAAd,CAAZ,CACA,GAAIgC,CAAAA,QAAQ,CAAG,EAAf,CACA,IAAI,GAAIjC,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAC,EAAjB,CAAqBA,CAAC,EAAtB,CAA0B,CACxB,GAAMkC,CAAAA,kBAAkB,CAAG,CAAC,EAAEzB,IAAI,CAACC,MAAL,GAAgBrB,KAAK,CAACkB,MAAxB,CAA5B,CACA0B,QAAQ,8BAAOA,QAAP,GAAiB5C,KAAK,CAAC6C,kBAAD,CAAtB,EAAR,CACA7C,KAAK,CAACsB,MAAN,CAAauB,kBAAb,CAAiC,CAAjC,EACD,CACD7C,KAAK,CAAG4C,QAAR,CACA,GAAME,CAAAA,KAAK,CAAG9C,KAAK,CAACU,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACG,MAAN,EAAX,CAAd,CACA,GAAMiC,CAAAA,OAAO,CAAG/C,KAAK,CAACgD,MAAN,CACd,SAACC,GAAD,CAAMC,GAAN,0BAAoBD,GAApB,oBAA0BC,GAAG,CAACpC,MAA9B,CAAuCoC,GAAG,CAACC,IAA3C,IADc,CAEd,EAFc,CAAhB,CAKA,GAAM9B,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,SAAM,CAAC,EAAED,IAAI,CAACC,MAAL,GAAgB,CAAlB,CAAP,EAAf,CAEA,GAAM+B,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACnC,MAAL,GAAgB,CAApB,EAAnB,CAEA,GAAMoC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACrB,MAAD,CAASoB,IAAT,CAAkB,CACnC,GAAI,CACF,GAAME,CAAAA,KAAK,CAAGR,OAAO,CAACd,MAAD,CAAP,CAAgBZ,MAAM,EAAtB,CAAd,CACA,GAAI,CAACkC,KAAD,EAAUF,IAAI,CAACG,IAAL,CAAU,SAAA7C,CAAC,QAAIA,CAAAA,CAAC,CAACM,QAAF,CAAWsC,KAAX,CAAJ,EAAX,CAAd,CAAiD,CAC/C,MAAOD,CAAAA,UAAU,CAACrB,MAAD,CAASoB,IAAT,CAAjB,CACD,CACD,gBAAUpB,MAAV,eAAsBsB,KAAtB,EACD,CAAC,MAAOE,GAAP,CAAY,CACZ,MAAOd,CAAAA,eAAe,EAAtB,CACD,CACF,CAVD,CAYA,GAAMe,CAAAA,SAAS,CAAGZ,KAAK,CAACE,MAAN,CAChB,SAACC,GAAD,CAAMC,GAAN,CAAc,CACZ,GAAIE,MAAM,CAACH,GAAG,CAAC,CAAD,CAAJ,CAAN,EAAkBG,MAAM,CAACH,GAAG,CAAC,CAAD,CAAJ,CAA5B,CAAsC,CACpCG,MAAM,CAACH,GAAG,CAAC,CAAD,CAAJ,CAAN,CACIA,GAAG,CAAC,CAAD,CAAH,CAAOU,IAAP,CAAYL,UAAU,CAACJ,GAAD,CAAMD,GAAG,CAAC,CAAD,CAAT,CAAtB,CADJ,CAEIA,GAAG,CAAC,CAAD,CAAH,CAAOU,IAAP,CAAYL,UAAU,CAACJ,GAAD,CAAMD,GAAG,CAAC,CAAD,CAAT,CAAtB,CAFJ,CAGD,CAJD,IAIO,CACL,GAAMW,CAAAA,CAAC,CAAGvC,MAAM,GAAK,CAArB,CACA4B,GAAG,CAACW,CAAD,CAAH,CAAOD,IAAP,CAAYL,UAAU,CAACJ,GAAD,CAAMD,GAAG,CAACW,CAAD,CAAT,CAAtB,EACD,CACD,MAAOX,CAAAA,GAAP,CACD,CAXe,CAYhB,CAAE,IAAK,EAAP,CAAW,IAAK,EAAhB,CAZgB,CAAlB,CAeA,GACES,SAAS,CAAC,CAAD,CAAT,CAAa1C,MAAb,CAAoB6C,OAApB,EAA6B3C,MAA7B,GAAwC,CAAxC,EACAwC,SAAS,CAAC,CAAD,CAAT,CAAa1C,MAAb,CAAoB6C,OAApB,EAA6B3C,MAA7B,GAAwC,CAF1C,CAGE,CACA,GAAM4C,CAAAA,MAAM,CAAGJ,SAAS,CAAC,CAAD,CAAT,CAAaV,MAAb,CAAoB,SAACC,GAAD,CAAMC,GAAN,CAAc,CAC/C,GAAMa,CAAAA,IAAI,CAAGb,GAAG,CAACb,KAAJ,CAAU,KAAV,EAAiB,CAAjB,CAAb,CACA,GAAM2B,CAAAA,CAAC,CAAGlE,KAAK,CAACoC,IAAN,CAAW,SAAA8B,CAAC,QAAIA,CAAAA,CAAC,CAAClD,MAAF,GAAaiD,IAAjB,EAAZ,CAAV,CACAd,GAAG,EAAIe,CAAC,CAACC,WAAF,CAAgB,CAAC,EAAED,CAAC,CAACzB,GAAF,EAAOyB,CAAC,CAACzB,GAAF,CAAOyB,CAAC,CAACxB,IAAhB,EAAwB,GAA1B,CAAxB,CACA,MAAOS,CAAAA,GAAP,CACD,CALc,CAKZ,CALY,CAAf,CAMA,GAAMiB,CAAAA,MAAM,CAAGR,SAAS,CAAC,CAAD,CAAT,CAAaV,MAAb,CAAoB,SAACC,GAAD,CAAMC,GAAN,CAAc,CAC/C,GAAMa,CAAAA,IAAI,CAAGb,GAAG,CAACb,KAAJ,CAAU,KAAV,EAAiB,CAAjB,CAAb,CACA,GAAM2B,CAAAA,CAAC,CAAGlE,KAAK,CAACoC,IAAN,CAAW,SAAA8B,CAAC,QAAIA,CAAAA,CAAC,CAAClD,MAAF,GAAaiD,IAAjB,EAAZ,CAAV,CACAd,GAAG,EAAIe,CAAC,CAACC,WAAF,CAAgB,CAAC,EAAED,CAAC,CAACzB,GAAF,EAAOyB,CAAC,CAACzB,GAAF,CAAOyB,CAAC,CAACxB,IAAhB,EAAwB,GAA1B,CAAxB,CACA,MAAOS,CAAAA,GAAP,CACD,CALc,CAKZ,CALY,CAAf,CAOA,GAAG7B,IAAI,CAAC+C,GAAL,CAASL,MAAM,CAAGI,MAAlB,EAA4B,EAA/B,CAAmC,CACjCjE,QAAQ,CAACyD,SAAD,CAAR,CACD,CAFD,IAEO,CACL,MAAOf,CAAAA,eAAe,EAAtB,CACD,CACF,CACF,CArED,CAuEA,GAAMyB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAR,CAAC,CAAI,CACtB,OAAQA,CAAR,EACE,IAAK,KAAL,CACE,MACE,qBAAC,KAAD,EACE,KAAK,CAAE,CAAES,UAAU,CAAE,SAAd,CAAyBC,WAAW,CAAE,EAAtC,CAA0CC,KAAK,CAAE,OAAjD,CADT,EAGGX,CAHH,CADF,CAOF,IAAK,QAAL,CACE,MACE,qBAAC,KAAD,EACE,KAAK,CAAE,CAAES,UAAU,CAAE,SAAd,CAAyBC,WAAW,CAAE,EAAtC,CAA0CC,KAAK,CAAE,OAAjD,CADT,EAGGX,CAHH,CADF,CAOF,IAAK,KAAL,CACE,MACE,qBAAC,KAAD,EACE,KAAK,CAAE,CAAES,UAAU,CAAE,SAAd,CAAyBC,WAAW,CAAE,EAAtC,CAA0CC,KAAK,CAAE,OAAjD,CADT,EAGGX,CAHH,CADF,CAOF,IAAK,IAAL,CACE,MACE,qBAAC,KAAD,EACE,KAAK,CAAE,CAAES,UAAU,CAAE,SAAd,CAAyBC,WAAW,CAAE,EAAtC,CAA0CC,KAAK,CAAE,OAAjD,CADT,EAGGX,CAHH,CADF,CAOF,IAAK,SAAL,CACE,MACE,qBAAC,KAAD,EACE,KAAK,CAAE,CAAES,UAAU,CAAE,SAAd,CAAyBC,WAAW,CAAE,EAAtC,CAA0CC,KAAK,CAAE,OAAjD,CADT,EAGGX,CAHH,CADF,CAOF,QACE,MAAOA,CAAAA,CAAP,CA1CJ,CA4CD,CA7CD,CA8CA,GAAMY,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAZ,CAAC,CAAI,CACzB,GAAIA,CAAC,EAAI,EAAT,CAAa,CACX,MACE,qBAAC,KAAD,EACE,KAAK,CAAE,CAAES,UAAU,CAAE,SAAd,CAAyBC,WAAW,CAAE,EAAtC,CAA0CC,KAAK,CAAE,OAAjD,CADT,EAGGX,CAHH,CAIE,qCAJF,CADF,CAQD,CATD,IASO,IAAIA,CAAC,EAAI,EAAT,CAAa,CAClB,MACE,qBAAC,KAAD,EAAO,KAAK,CAAC,SAAb,EACGA,CADH,CAEE,qCAFF,CADF,CAMD,CAPM,IAOA,IAAIA,CAAC,EAAI,EAAT,CAAa,CAClB,MACE,qBAAC,KAAD,EAAO,KAAK,CAAC,SAAb,EACGA,CADH,CAEE,qCAFF,CADF,CAMD,CAPM,IAOA,IAAIA,CAAC,EAAI,GAAT,CAAc,CACnB,MACE,qBAAC,KAAD,EAAO,KAAK,CAAC,SAAb,EACGA,CADH,CAEE,qCAFF,CADF,CAMD,CACF,CAhCD,CAkCA,GAAMa,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,MAAO3E,CAAAA,KAAK,CAACY,GAAN,CAAU,SAACmB,IAAD,CAAOV,KAAP,CAAiB,CAChC,MACE,2BAAI,GAAG,CAAEU,IAAI,CAAC6C,QAAd,EACE,8BACE,oBAAC,KAAD,EAAO,KAAK,CAAE,CAAEL,UAAU,CAAE,SAAd,CAAyBE,KAAK,CAAE,OAAhC,CAAd,EACGpD,KAAK,CAAG,CADX,CADF,CADF,CAME,8BACGU,IAAI,CAACY,MAAL,EACC,oBAAC,OAAD,EACE,KAAK,CAAE,CAAEkC,KAAK,CAAE,MAAT,CADT,CAEE,GAAG,CAAE9C,IAAI,CAACY,MAFZ,CAGE,GAAG,CAAC,QAHN,EAFJ,CANF,CAeE,8BACE,oBAAC,KAAD,EAAO,KAAK,CAAE,CAAE4B,UAAU,CAAE,SAAd,CAAyBE,KAAK,CAAE,OAAhC,CAAd,EACG1C,IAAI,CAACf,MADR,CADF,CAfF,CAoBE,8BACGe,IAAI,CAACsB,IAAL,EACCtB,IAAI,CAACsB,IAAL,CAAUzC,GAAV,CAAc,SAAAkD,CAAC,QACb,6BAAM,GAAG,CAAE/B,IAAI,CAAC6C,QAAL,CAAgBd,CAA3B,EAA+BQ,UAAU,CAACR,CAAD,CAAzC,CADa,EAAf,CAFJ,CApBF,CA0BE,8BACE,oBAAC,KAAD,EAAO,KAAK,CAAC,SAAb,EAAwB/B,IAAI,CAACU,GAA7B,CADF,CA1BF,CA6BE,8BACE,oBAAC,KAAD,EAAO,KAAK,CAAC,QAAb,EAAuBV,IAAI,CAACW,IAA5B,CADF,CA7BF,CAgCE,8BACGgC,aAAa,CAAC,CAAC,EAAG3C,IAAI,CAACU,GAAL,EAAYV,IAAI,CAACU,GAAL,CAAWV,IAAI,CAACW,IAA5B,CAAD,CAAsC,GAAtC,EAA6C,CAA/C,CAAF,CADhB,CAhCF,CAmCE,8BACE,oBAAC,SAAD,EACE,SAAS,CAAE,MADb,CAEE,KAAK,CAAE,SAFT,CAGE,OAAO,CAAEX,IAAI,CAACjB,OAHhB,CAIE,QAAQ,CACLgE,mBAAmB,KAAO,EAA1B,EAAgC,CAAC/C,IAAI,CAACjB,OAAvC,EACA,CAACiB,IAAI,CAACsB,IADN,EAEA,CAACtB,IAAI,CAACsB,IAAL,CAAUjC,MAPf,CASE,QAAQ,CAAE,wBAA6B,IAAhBN,CAAAA,OAAgB,OAA1BiE,MAA0B,CAAhBjE,OAAgB,CACrCb,QAAQ,CAAC,SAAAU,IAAI,QACXA,CAAAA,IAAI,CAACC,GAAL,CAAS,SAAAoE,CAAC,CAAI,CACZ,GAAIA,CAAC,CAACJ,QAAF,GAAe7C,IAAI,CAAC6C,QAAxB,CAAkC,CAChCI,CAAC,CAAClE,OAAF,CAAYA,OAAZ,CACD,CACD,MAAOkE,CAAAA,CAAP,CACD,CALD,CADW,EAAL,CAAR,CAQD,CAlBH,EADF,CAnCF,CADF,CA4DD,CA7DM,CAAP,CA8DD,CA/DD,CAiEA,GAAMF,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC,MAAO9E,CAAAA,KAAK,CAACkB,MAAN,CAAa,SAAAL,CAAC,QAAIA,CAAAA,CAAC,CAACC,OAAN,EAAd,EAA6BM,MAApC,CACD,CAFD,CAIA,GAAM6D,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjCpF,oBAAoB,CAAC,IAAD,CAApB,CACA,GAAMqF,CAAAA,SAAS,CAAG,CAChBC,QAAQ,CAAEjF,KAAK,CAAC,CAAD,CADC,CAEhBkF,OAAO,CAAElF,KAAK,CAAC,CAAD,CAFE,CAGhBmF,SAAS,CAAEhG,MAAM,CAAC,GAAIiG,CAAAA,IAAJ,EAAD,CAAN,CAAmBC,MAAnB,CAA0B,YAA1B,CAHK,CAIhBtD,QAAQ,CAAE,KAJM,CAKhBuD,YAAY,CAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4ChB,QAL1C,CAMhBiB,YAAY,CAAE,EANE,CAAlB,CASAtG,GAAG,CAACA,GAAJ,CAAQ,eAAR,EAAyBsE,IAAzB,CAA8BqB,SAA9B,CAAyC,SAAAvD,IAAI,CAAI,CAC/C9B,oBAAoB,CAAC,KAAD,CAApB,CACD,CAFD,EAGAN,GAAG,CAACA,GAAJ,CAAQ,sBAAR,EAAgCsE,IAAhC,CAAqCvD,sBAArC,EACAD,WAAW,CAAC6E,SAAD,CAAX,CACD,CAhBD,CAkBA,GAAI9E,QAAQ,CAAC6B,QAAT,GAAsB,KAA1B,CACE,MACE,qBAAC,QAAD,EACE,QAAQ,CAAE7B,QADZ,CAEE,oBAAoB,CAAEP,oBAFxB,EADF,CAOF,MACE,qBAAC,GAAD,MACE,oBAAC,GAAD,MACE,oBAAC,IAAD,MACE,oBAAC,UAAD,MACE,yBAAG,SAAS,CAAC,qBAAb,EADF,gBADF,CAIE,oBAAC,QAAD,MACE,gDACkB,GADlB,CAEE,oBAAC,KAAD,EACE,KAAK,CAAEiF,mBAAmB,KAAO,EAA1B,CAA+B,SAA/B,CAA2C,WADpD,EAGGA,mBAAmB,EAHtB,CAFF,CADF,CASIA,mBAAmB,KAAO,EAA1B,EACA,oEADD,EAEK,iDAXR,CAYE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,QAAQ,KAArB,CAAsB,OAAO,KAA7B,CAA8B,UAAU,KAAxC,CAAyC,IAAI,CAAC,IAA9C,EACE,iCACE,8BACE,kCADF,CAEE,uCAFF,CAGE,uCAHF,CAIE,qCAJF,CAKE,oCALF,CAME,qCANF,CAOE,0CACW,uCADX,CAPF,CAUE,uCAVF,CADF,CADF,CAeE,iCAAQH,UAAU,EAAlB,CAfF,CAZF,CA6BE,oBAAC,GAAD,MACE,oBAAC,GAAD,EAAK,GAAG,CAAC,GAAT,CAAa,EAAE,CAAC,GAAhB,CAAoB,EAAE,CAAC,GAAvB,CAA2B,EAAE,CAAC,GAA9B,CAAkC,SAAS,CAAC,cAA5C,EACE,oBAAC,MAAD,EACE,KAAK,KADP,CAEE,KAAK,CAAC,SAFR,CAGE,OAAO,CAAEjE,kBAHX,CAIE,SAAS,KAJX,mBADF,CADF,CAWE,oBAAC,GAAD,EAAK,GAAG,CAAC,GAAT,CAAa,EAAE,CAAC,GAAhB,CAAoB,EAAE,CAAC,GAAvB,CAA2B,EAAE,CAAC,GAA9B,CAAkC,SAAS,CAAC,cAA5C,EACE,oBAAC,MAAD,EACE,KAAK,KADP,CAEE,KAAK,CAAC,SAFR,CAGE,QAAQ,CAAEoE,mBAAmB,KAAO,EAHtC,CAIE,OAAO,CAAEjC,eAJX,CAKE,SAAS,KALX,gBADF,CAXF,CA7BF,CAoDE,2BAAK,GAAG,CAAE/C,KAAV,EACGI,KAAK,EAAIuF,IAAI,CAACK,SAAL,CAAe5F,KAAf,IAA0B,IAAnC,EACC,wCACE,oBAAC,UAAD,EAAY,KAAK,CAAEmC,YAAY,EAA/B,EADF,CAEE,oBAAC,UAAD,EAAY,KAAK,CAAEA,YAAY,EAA/B,EAFF,CAGE,oBAAC,GAAD,MACE,oBAAC,GAAD,EAAK,GAAG,CAAC,GAAT,CAAa,EAAE,CAAC,GAAhB,CAAoB,EAAE,CAAC,GAAvB,CAA2B,EAAE,CAAC,GAA9B,CAAkC,SAAS,CAAC,cAA5C,EACE,oBAAC,MAAD,EACE,KAAK,KADP,CAEE,KAAK,CAAC,SAFR,CAGE,OAAO,CAAE4C,oBAHX,cADF,CADF,CAHF,CAFJ,CApDF,CAJF,CADF,CADF,CADF,CAmFD,CA9aD,CAgbA,cAAerF,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport firebase from \"./../../config\";\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Col,\r\n  Row,\r\n  Table,\r\n  CardImg,\r\n  Badge,\r\n  Button\r\n} from \"reactstrap\";\r\nimport { AppSwitch } from \"@coreui/react\";\r\nimport ChartTeams from \"./ChartTeams\";\r\nimport TableTeams from \"./TableTeams\";\r\nimport OldMatch from \"./OldMatch\";\r\nimport moment from \"moment\";\r\n\r\nconst scrollToRef = ref =>\r\n  ref.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n\r\nconst Random = ({ changeStatusProgress }) => {\r\n  const myRef = useRef(null);\r\n  const ref = firebase.database();\r\n  const [users, setUsers] = useState([]);\r\n  const [teams, setTeams] = useState({});\r\n  const [oldMatch, setOldMatch] = useState({});\r\n  const [randomPlayerNotInclude, setRandomPlayerNotInclude] = useState([]);\r\n  const [lastRandomNotPlay, setLastRandomNotPlay] = useState([]);\r\n\r\n  const handleRandomPlayer = () => {    \r\n    setUsers(prev => prev.map(i => ({ ...i, checked: false })));\r\n    let arrayUsers = [...lastRandomNotPlay.map(i => i.ingame)];\r\n    let tempUsers = [...users].filter(i => !arrayUsers.includes(i.ingame));\r\n    let length = arrayUsers.length;\r\n    for (let i = 0; i < 10 - length; i++) {\r\n      let index = ~~(Math.random() * tempUsers.length);\r\n      arrayUsers = [...arrayUsers, tempUsers[index] && tempUsers[index].ingame];\r\n      tempUsers.splice(index, 1);\r\n    }\r\n\r\n    setUsers(prev =>\r\n      prev.map(i =>\r\n        arrayUsers.includes(i.ingame) ? { ...i, checked: true } : i\r\n      )\r\n    );\r\n    setTeams({});\r\n    setRandomPlayerNotInclude(tempUsers);\r\n  };\r\n\r\n  useEffect(() => {\r\n    changeStatusProgress(true);\r\n    ref\r\n      .ref(\"users\")\r\n      .orderByValue()\r\n      .on(\"value\", snap => {\r\n        changeStatusProgress(false);\r\n        setUsers(\r\n          Object.values(snap.val()).map(user => ({ ...user, checked: false }))\r\n        );\r\n      });\r\n\r\n    ref\r\n      .ref(\"historyRandom\")\r\n      .orderByValue()\r\n      .limitToLast(1)\r\n      .on(\"value\", snap => {\r\n        changeStatusProgress(false);\r\n        if (snap.val() !== null && !Object.values(snap.val())[0].complete) {\r\n          setOldMatch(Object.values(snap.val())[0]);\r\n        }\r\n      });\r\n\r\n    ref\r\n      .ref(\"historyRandomNotPlay\")\r\n      .orderByValue()\r\n      .limitToLast(1)\r\n      .on(\"value\", snap => {\r\n        if (snap.val()) {\r\n          setLastRandomNotPlay(Object.values(snap.val())[0]);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  const statisticPlayer = player => users.find(user => user.ingame === player);\r\n\r\n  useEffect(() => {\r\n    scrollToRef(myRef);\r\n  }, [teams]);\r\n\r\n  const lastInfoTeam = () => {\r\n    const t1 =\r\n      teams[0] &&\r\n      teams[0].map(i => {\r\n        const player = i.split(\" - \")[0];\r\n        const addStatistic =\r\n          i +\r\n          \" - \" +\r\n          statisticPlayer(player).win +\r\n          \" - \" +\r\n          statisticPlayer(player).lose +\r\n          \" - \" +\r\n          statisticPlayer(player).avatar;\r\n        return addStatistic;\r\n      });\r\n    const t2 =\r\n      teams[1] &&\r\n      teams[1].map(i => {\r\n        const player = i.split(\" - \")[0];\r\n        const addStatistic =\r\n          i +\r\n          \" - \" +\r\n          statisticPlayer(player).win +\r\n          \" - \" +\r\n          statisticPlayer(player).lose +\r\n          \" -  \" +\r\n          statisticPlayer(player).avatar;\r\n        return addStatistic;\r\n      });\r\n    return { [0]: t1, [1]: t2 };\r\n  };\r\n\r\n  const handleSplitTeam = () => {\r\n    let teams = users.filter(i => i.checked);\r\n    let tmpTeams = [];\r\n    for(let i = 0; i<10; i++) {\r\n      const randomFollowLength = ~~(Math.random() * teams.length);\r\n      tmpTeams = [...tmpTeams, teams[randomFollowLength]];\r\n      teams.splice(randomFollowLength, 1);\r\n    }\r\n    teams = tmpTeams;\r\n    const names = teams.map(i => i.ingame);\r\n    const details = teams.reduce(\r\n      (acc, cur) => ({ ...acc, [cur.ingame]: cur.role }),\r\n      {}\r\n    );\r\n\r\n    const random = () => ~~(Math.random() * 5);\r\n\r\n    const isFull = team => team.length === 5;\r\n\r\n    const renderLane = (player, team) => {\r\n      try {\r\n        const rLane = details[player][random()];\r\n        if (!rLane || team.some(i => i.includes(rLane))) {\r\n          return renderLane(player, team);\r\n        }\r\n        return `${player} - ${rLane}`;\r\n      } catch (err) {\r\n        return handleSplitTeam();\r\n      }\r\n    };\r\n\r\n    const splitTeam = names.reduce(\r\n      (acc, cur) => {\r\n        if (isFull(acc[0]) || isFull(acc[1])) {\r\n          isFull(acc[0])\r\n            ? acc[1].push(renderLane(cur, acc[1]))\r\n            : acc[0].push(renderLane(cur, acc[1]));\r\n        } else {\r\n          const r = random() % 2;\r\n          acc[r].push(renderLane(cur, acc[r]));\r\n        }\r\n        return acc;\r\n      },\r\n      { \"0\": [], \"1\": [] }\r\n    );\r\n\r\n    if (\r\n      splitTeam[0].filter(Boolean).length === 5 &&\r\n      splitTeam[1].filter(Boolean).length === 5\r\n    ) {\r\n      const point1 = splitTeam[0].reduce((acc, cur) => {\r\n        const name = cur.split(' - ')[0];\r\n        const u = users.find(u => u.ingame === name);\r\n        acc += u.coefficient * ~~(u.win/(u.win +u.lose) * 100)\r\n        return acc\r\n      }, 0)\r\n      const point2 = splitTeam[1].reduce((acc, cur) => {\r\n        const name = cur.split(' - ')[0];\r\n        const u = users.find(u => u.ingame === name);\r\n        acc += u.coefficient * ~~(u.win/(u.win +u.lose) * 100)\r\n        return acc\r\n      }, 0)\r\n      \r\n      if(Math.abs(point1 - point2) < 40) {\r\n        setTeams(splitTeam);\r\n      } else {\r\n        return handleSplitTeam();\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderRole = r => {\r\n    switch (r) {\r\n      case \"top\":\r\n        return (\r\n          <Badge\r\n            style={{ background: \"#0099FF\", marginRight: 10, color: \"white\" }}\r\n          >\r\n            {r}\r\n          </Badge>\r\n        );\r\n      case \"jungle\":\r\n        return (\r\n          <Badge\r\n            style={{ background: \"#3366CC\", marginRight: 10, color: \"white\" }}\r\n          >\r\n            {r}\r\n          </Badge>\r\n        );\r\n      case \"mid\":\r\n        return (\r\n          <Badge\r\n            style={{ background: \"#FF9900\", marginRight: 10, color: \"white\" }}\r\n          >\r\n            {r}\r\n          </Badge>\r\n        );\r\n      case \"ad\":\r\n        return (\r\n          <Badge\r\n            style={{ background: \"#f25e5e\", marginRight: 10, color: \"white\" }}\r\n          >\r\n            {r}\r\n          </Badge>\r\n        );\r\n      case \"support\":\r\n        return (\r\n          <Badge\r\n            style={{ background: \"#f2a766\", marginRight: 10, color: \"white\" }}\r\n          >\r\n            {r}\r\n          </Badge>\r\n        );\r\n      default:\r\n        return r;\r\n    }\r\n  };\r\n  const renderWinRate = r => {\r\n    if (r <= 25) {\r\n      return (\r\n        <Badge\r\n          style={{ background: \"#f25e5e\", marginRight: 10, color: \"white\" }}\r\n        >\r\n          {r}\r\n          <small>%</small>\r\n        </Badge>\r\n      );\r\n    } else if (r <= 50) {\r\n      return (\r\n        <Badge color=\"warning\">\r\n          {r}\r\n          <small>%</small>\r\n        </Badge>\r\n      );\r\n    } else if (r <= 75) {\r\n      return (\r\n        <Badge color=\"primary\">\r\n          {r}\r\n          <small>%</small>\r\n        </Badge>\r\n      );\r\n    } else if (r <= 100) {\r\n      return (\r\n        <Badge color=\"success\">\r\n          {r}\r\n          <small>%</small>\r\n        </Badge>\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderUser = () => {\r\n    return users.map((user, index) => {\r\n      return (\r\n        <tr key={user.username}>\r\n          <td>\r\n            <Badge style={{ background: \"#660099\", color: \"white\" }}>\r\n              {index + 1}\r\n            </Badge>\r\n          </td>\r\n          <td>\r\n            {user.avatar && (\r\n              <CardImg\r\n                style={{ width: \"30px\" }}\r\n                src={user.avatar}\r\n                alt=\"avatar\"\r\n              />\r\n            )}\r\n          </td>\r\n          <td>\r\n            <Badge style={{ background: \"#660099\", color: \"white\" }}>\r\n              {user.ingame}\r\n            </Badge>\r\n          </td>\r\n          <td>\r\n            {user.role &&\r\n              user.role.map(r => (\r\n                <span key={user.username + r}>{renderRole(r)}</span>\r\n              ))}\r\n          </td>\r\n          <td>\r\n            <Badge color=\"success\">{user.win}</Badge>\r\n          </td>\r\n          <td>\r\n            <Badge color=\"danger\">{user.lose}</Badge>\r\n          </td>\r\n          <td>\r\n            {renderWinRate(~~((user.win / (user.win + user.lose)) * 100 || 0))}\r\n          </td>\r\n          <td>\r\n            <AppSwitch\r\n              className={\"mx-1\"}\r\n              color={\"success\"}\r\n              checked={user.checked}\r\n              disabled={\r\n                (handleTotalSelected() === 10 && !user.checked) ||\r\n                !user.role ||\r\n                !user.role.length\r\n              }\r\n              onChange={({ target: { checked } }) => {\r\n                setUsers(prev =>\r\n                  prev.map(p => {\r\n                    if (p.username === user.username) {\r\n                      p.checked = checked;\r\n                    }\r\n                    return p;\r\n                  })\r\n                );\r\n              }}\r\n            />\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  };\r\n\r\n  const handleTotalSelected = () => {\r\n    return users.filter(i => i.checked).length;\r\n  };\r\n\r\n  const handleSaveTeamRandom = () => {\r\n    changeStatusProgress(true);\r\n    const statistic = {\r\n      blueTeam: teams[0],\r\n      redTeam: teams[1],\r\n      dateMatch: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n      complete: false,\r\n      authorCreate: JSON.parse(localStorage.getItem(\"account\")).username,\r\n      authorUpdate: \"\"\r\n    };\r\n\r\n    ref.ref(\"historyRandom\").push(statistic, snap => {\r\n      changeStatusProgress(false);\r\n    });\r\n    ref.ref(\"historyRandomNotPlay\").push(randomPlayerNotInclude);\r\n    setOldMatch(statistic);\r\n  };\r\n\r\n  if (oldMatch.complete === false)\r\n    return (\r\n      <OldMatch\r\n        oldMatch={oldMatch}\r\n        changeStatusProgress={changeStatusProgress}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <Row>\r\n      <Col>\r\n        <Card>\r\n          <CardHeader>\r\n            <i className=\"fa fa-align-justify\"></i> Users table\r\n          </CardHeader>\r\n          <CardBody>\r\n            <h4>\r\n              Player selected{\" \"}\r\n              <Badge\r\n                color={handleTotalSelected() === 10 ? \"success\" : \"secondary\"}\r\n              >\r\n                {handleTotalSelected()}\r\n              </Badge>\r\n            </h4>\r\n            {(handleTotalSelected() !== 10 && (\r\n              <small>Choose 10 players from the board</small>\r\n            )) || <small>Picked enough</small>}\r\n            <Table hover bordered striped responsive size=\"sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>#</th>\r\n                  <th>Avatar</th>\r\n                  <th>Player</th>\r\n                  <th>Role</th>\r\n                  <th>Win</th>\r\n                  <th>Lost</th>\r\n                  <th>\r\n                    Win rate <small>(%)</small>\r\n                  </th>\r\n                  <th>Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>{renderUser()}</tbody>\r\n            </Table>\r\n            <Row>\r\n              <Col col=\"6\" sm=\"4\" md=\"3\" xl=\"2\" className=\"mb-3 mb-xl-0\">\r\n                <Button\r\n                  block\r\n                  color=\"success\"\r\n                  onClick={handleRandomPlayer}\r\n                  fullWidth\r\n                >\r\n                  Random players\r\n                </Button>\r\n              </Col>\r\n              <Col col=\"6\" sm=\"4\" md=\"3\" xl=\"2\" className=\"mb-3 mb-xl-0\">\r\n                <Button\r\n                  block\r\n                  color=\"success\"\r\n                  disabled={handleTotalSelected() !== 10}\r\n                  onClick={handleSplitTeam}\r\n                  fullWidth\r\n                >\r\n                  Random team\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <div ref={myRef}>\r\n              {teams && JSON.stringify(teams) !== \"{}\" && (\r\n                <>\r\n                  <TableTeams teams={lastInfoTeam()} />\r\n                  <ChartTeams teams={lastInfoTeam()} />\r\n                  <Row>\r\n                    <Col col=\"6\" sm=\"4\" md=\"3\" xl=\"2\" className=\"mb-3 mb-xl-0\">\r\n                      <Button\r\n                        block\r\n                        color=\"success\"\r\n                        onClick={handleSaveTeamRandom}\r\n                      >\r\n                        Save Team\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </>\r\n              )}\r\n            </div>\r\n          </CardBody>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default Random;\r\n"]},"metadata":{},"sourceType":"module"}