{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\persol\\\\persol-lqmb\\\\src\\\\components\\\\Dashboard\\\\index.js\";\nimport React, { useEffect, useState } from 'react';\nimport firebase from \"./../../config\";\nimport W1 from './components/W1';\nimport W2 from './components/W2';\n\nvar Dashboard = function Dashboard(_ref) {\n  var changeStatusProgress = _ref.changeStatusProgress;\n  var ref = firebase.database();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      account = _useState2[0],\n      setAccount = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      historyMatchs = _useState4[0],\n      setHistoryMatchs = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fecthStatus = _useState6[0],\n      setFecthStatus = _useState6[1]; // useEffect(() => {\n\n\n  var a = _toConsumableArray(account).reduce(function (acc, cur) {\n    var objTmp = {\n      win: {},\n      lose: {}\n    };\n    var ingame = cur.ingame;\n    if (!cur || !historyMatchs) return;\n    historyMatchs.map(function (h) {\n      console.log(h.blueTeam.some(function (e) {\n        console.log(e, ingame);\n        return e.search(ingame) !== -1;\n      }));\n\n      if (h.blueTeam.some(function (e) {\n        return e.search(ingame) !== -1;\n      })) {\n        if (h.win === 'blueTeam') {\n          h.blueTeam.map(function (p) {\n            p = p.split(' - ')[0];\n\n            if (p !== cur.ingame) {\n              objTmp.win = !!objTmp.win[p] ? _objectSpread({}, objTmp.win, _defineProperty({}, p, objTmp.win[p] + 1)) : _objectSpread({}, objTmp.win, _defineProperty({}, p, 1));\n            }\n          });\n        } else {\n          h.blueTeam.map(function (p) {\n            p = p.split(' - ')[0];\n\n            if (p !== cur.ingame) {\n              objTmp.lose = !!objTmp.lose[p] ? _objectSpread({}, objTmp.lose, _defineProperty({}, p, objTmp.lose[p] + 1)) : _objectSpread({}, objTmp.lose, _defineProperty({}, p, 1));\n            }\n          });\n        }\n      }\n\n      if (h.redTeam.some(function (e) {\n        return e.search(ingame) !== -1;\n      })) {\n        if (h.win === 'redTeam') {\n          h.redTeam.map(function (p) {\n            p = p.split(' - ')[0];\n\n            if (p !== cur.ingame) {\n              objTmp.win = !!objTmp.win[p] ? _objectSpread({}, objTmp.win, _defineProperty({}, p, objTmp.win[p] + 1)) : _objectSpread({}, objTmp.win, _defineProperty({}, p, 1));\n            }\n          });\n        } else {\n          h.redTeam.map(function (p) {\n            p = p.split(' - ')[0];\n\n            if (p !== cur.ingame) {\n              objTmp.lose = !!objTmp.lose[p] ? _objectSpread({}, objTmp.lose, _defineProperty({}, p, objTmp.lose[p] + 1)) : _objectSpread({}, objTmp.lose, _defineProperty({}, p, 1));\n            }\n          });\n        }\n      }\n    });\n    console.log(objTmp);\n    return _objectSpread({}, acc, _defineProperty({}, cur.ingame, objTmp));\n  }, {});\n\n  console.log(account, historyMatchs, a); // }, [account, historyMatchs])\n\n  var initFunc =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var snapshotUsers, snapshotMatchs, _ref3, _ref4, users, matchs;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              snapshotUsers = ref.ref(\"users\").once(\"value\");\n              snapshotMatchs = ref.ref(\"historyMatch\").once(\"value\");\n              _context.next = 4;\n              return Promise.all([snapshotUsers, snapshotMatchs]);\n\n            case 4:\n              _ref3 = _context.sent;\n              _ref4 = _slicedToArray(_ref3, 2);\n              users = _ref4[0];\n              matchs = _ref4[1];\n              setAccount(Object.values(users.val()));\n              setHistoryMatchs(Object.values(matchs.val()));\n              setFecthStatus(true);\n              changeStatusProgress(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function initFunc() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    changeStatusProgress(true);\n    initFunc();\n  }, []);\n  if (!fecthStatus) return null;\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"animated fadeIn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(W1, {\n    account: account,\n    historyMatchs: historyMatchs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(W2, {\n    account: account,\n    historyMatchs: historyMatchs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/persol/persol-lqmb/src/components/Dashboard/index.js"],"names":["React","useEffect","useState","firebase","W1","W2","Dashboard","changeStatusProgress","ref","database","account","setAccount","historyMatchs","setHistoryMatchs","fecthStatus","setFecthStatus","a","reduce","acc","cur","objTmp","win","lose","ingame","map","h","console","log","blueTeam","some","e","search","p","split","redTeam","initFunc","snapshotUsers","once","snapshotMatchs","Promise","all","users","matchs","Object","values","val"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport firebase from \"./../../config\";\r\nimport W1 from './components/W1';\r\nimport W2 from './components/W2';\r\n\r\nconst Dashboard = ({ changeStatusProgress }) => {\r\n    const ref = firebase.database();\r\n    const [account, setAccount] = useState([])\r\n    const [historyMatchs, setHistoryMatchs] = useState([])\r\n    const [fecthStatus, setFecthStatus] = useState(false)\r\n\r\n    // useEffect(() => {\r\n    const a = [...account].reduce((acc, cur) => {\r\n        const objTmp = { win: {}, lose: {} };\r\n        const {ingame} = cur\r\n        if(!cur || !historyMatchs) return;\r\n        historyMatchs.map(h => {\r\n            console.log(h.blueTeam.some(e => {console.log(e, ingame); return e.search(ingame) !== -1 }))\r\n            if(h.blueTeam.some(e => {return e.search(ingame) !== -1 })) {\r\n                if(h.win === 'blueTeam') {\r\n                    h.blueTeam.map(p => {\r\n                        p = p.split(' - ')[0]\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.win = !!objTmp.win[p] ? { ...objTmp.win, [p]: objTmp.win[p] + 1 } : { ...objTmp.win, [p]: 1 }\r\n                        }\r\n                    })\r\n                } else {\r\n                    h.blueTeam.map(p => {\r\n                        p = p.split(' - ')[0]\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.lose = !!objTmp.lose[p] ? { ...objTmp.lose, [p]: objTmp.lose[p] + 1 } : { ...objTmp.lose, [p]: 1 }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            if(h.redTeam.some(e => { return e.search(ingame) !== -1})) {\r\n                if(h.win === 'redTeam') {\r\n                    h.redTeam.map(p => {\r\n                        p = p.split(' - ')[0]\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.win = !!objTmp.win[p] ? { ...objTmp.win, [p]: objTmp.win[p] + 1 } : { ...objTmp.win, [p]: 1 }\r\n                        }\r\n                    })\r\n                } else {\r\n                    h.redTeam.map(p => {\r\n                        p = p.split(' - ')[0]\r\n                        if(p !== cur.ingame) {\r\n                            objTmp.lose = !!objTmp.lose[p] ? { ...objTmp.lose, [p]: objTmp.lose[p] + 1 } : { ...objTmp.lose, [p]: 1 }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        })\r\n        console.log(objTmp)\r\n        return ({...acc, [cur.ingame]: objTmp})\r\n    }, {})\r\n\r\n    console.log(account, historyMatchs, a)\r\n    // }, [account, historyMatchs])\r\n\r\n    const initFunc = async () => {\r\n        const snapshotUsers = ref.ref(\"users\").once(\"value\")\r\n        const snapshotMatchs = ref.ref(\"historyMatch\").once(\"value\")\r\n        const [users, matchs] = await Promise.all([snapshotUsers, snapshotMatchs])\r\n        setAccount(Object.values(users.val()));\r\n        setHistoryMatchs(Object.values(matchs.val()));\r\n        setFecthStatus(true)\r\n        changeStatusProgress(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        changeStatusProgress(true)\r\n        initFunc();\r\n    }, [])\r\n\r\n    if (!fecthStatus) return null\r\n    return (<>\r\n        <div className=\"animated fadeIn\">\r\n            <W1 account={account} historyMatchs={historyMatchs} />\r\n            <W2 account={account} historyMatchs={historyMatchs} />\r\n        </div>\r\n    </>)\r\n}\r\n\r\nexport default Dashboard"]},"metadata":{},"sourceType":"module"}